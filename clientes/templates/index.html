{% extends 'base.html' %}
        
{% block content %}
    
<main class="content mb-5" >
    <div class="container-fluid">
        <div class="p-2 mt-3">
            <div class='display-5'>Bem Vindo(a)
                {% if user.is_authenticated %}, {% firstof user.get_full_name user.get_username %}!
                {% else %}
                !
                {% endif %}
            </div>
            <hr />
            {% if user.is_authenticated %}
            <div class="p-1">
                <h2>Agenda</h2>
            </div>
            <div class="p-1">
                <div id="calendar"></div>
            </div>
            {% else %}
            <div class="card card-body text-center">
                <h3 class="mb-0">Este é um site desenvolvido como atividade avaliativa para o Projeto Integrador em Computação II<br>
                </h3>
            </div>
            {% endif %}
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
          var calendarEl = document.getElementById('calendar');
          var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'listWeek', // the name of a generic view
            duration: { days: 15 },
            initialView: 'listWeek',
            timeZone: 'America/Sao_Paulo',
            themeSystem: 'bootstrap5',
            locale: 'pt-br',
            events: [
                {% for evento in agenda %}
                {
                  title: '{{ evento.titulo }}',
                  start: '{{ evento.data_inicio|date:"Y-m-d\TH:i:s" }}',
                  end: '{{ evento.data_fim|date:"Y-m-d\TH:i:s" }}',
                  url: '{% url "evento" evento.id %}',
                },
                {% endfor %}
            ]
            });
            calendar.render();
        });
        </script>
</main>
{% endblock content %}
